import "@babel/polyfill";

import {default as myTheme} from "./theme";
import {Head, Steps} from "mdx-deck";
import ImagesAsFunctions from "./slides/ImagesAsFunctions";
import Channels from "./slides/Channels";
import MindMap from "./slides/MindMap";
import {default as fullMindMap, shallow, ImageProcessing} from "./mindMap.js";
import {P, A, LI, Legend} from "./components/basic";
import {Grid, Box} from "theme-ui";

export const theme = myTheme;

<Head>
  <title>Computer vision basics on the Web</title>
  <link
    href="https://fonts.googleapis.com/css?family=Montserrat:400,800&display=swap"
    rel="stylesheet"
  />
  <link
    rel="stylesheet"
    href="https://use.fontawesome.com/releases/v5.7.2/css/all.css"
    integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr"
    crossOrigin="anonymous"
  />
</Head>

# Computer&nbsp;vision basics on&nbsp;the&nbsp;Web

<div style={{textAlign: "right"}}>
  <small>by Paolo Bueno</small>
  <br />
  <A href="http://linkedin.com/in/paolobueno">
    <i className="fab fa-linkedin" />
  </A>{" "}
  <A href="https://github.com/paolobueno">
    <i className="fab fa-github" />
  </A>
</div>

---

# Why?

<Steps>
  <P key="1">Explore newer Web APIs</P>
  <P key="2">Computer vision is a great intro to AI and ML</P>
</Steps>

---

<!-- 
# Web technology primer

<Steps>
  <P>Filters!</P>
</Steps>

---

import CSSFilters from "./slides/CSSFilters";

## CSS filters

<CSSFilters />

--- -->

<!-- 
import svgFiltersImg from "./assets/svgFilters.png";

## SVG filters

<a href="https://yoksel.github.io/svg-filters/#/" target="_blank">
  <img width="900px" src={svgFiltersImg} />
</a>

--- -->

# Computer vision

<ol>
  <Steps>
    <LI>
      <b>Image Processing</b>
    </LI>
    <LI>Feature Extraction</LI>
    <LI style={{color: "#aaa"}}>Recognition</LI>
  </Steps>
</ol>

---

# Machine Learning

<ol>
  <LI>
    <b>Pre-processing</b>
  </LI>
  <LI>Dimensionality Reduction</LI>
  <LI style={{color: "#aaa"}}>Classification/Clustering</LI>
</ol>

---

# What is an image?

---

import ImagesAsArrays from "./slides/ImagesAsArrays";

## Images are arrays

<ImagesAsArrays />

---

## Images are functions of 2D space

<ImagesAsFunctions />

You can always compare a pixel to it's neighbours

---

## Images are many channels

<Channels />

---

import multiChannelTexture from "./assets/3d-texture.png";

## Images are many channels

<img src={multiChannelTexture} style={{height: "80vh"}} />

---

## Audio channels

---

# Image Processing

In the end, we want to recognize something

So we need to simplify things in a smart way

---

import Grayscaling from "./slides/Grayscaling";

## Thresholding

<Grayscaling />

---

import erosion from "./assets/erosion.png";
import dilation from "./assets/dilation.png";
import opening from "./assets/opening.png";
import closing from "./assets/closing.png";

## Morphology

<Grid width={[128, 128, 128, 128]}>
  <Box>
    <p>Erosion ⊖</p>
    <img src={erosion} style={{height: "40vh"}} />
  </Box>
  <Box>
    <p>Dilation ⊕</p>
    <img src={dilation} style={{height: "40vh"}} />
  </Box>
  <Box>
    <p>Opening ⊕ ∘ ⊖</p>
    <img src={opening} style={{height: "40vh"}} />
  </Box>
  <Box>
    <p>Closing ⊖ ∘ ⊕</p>
    <img src={closing} style={{height: "40vh"}} />
  </Box>
</Grid>

---

## Morphology

import Morphology from "./slides/Morphology";

<Morphology style={{width: "60vw", height: "60vh"}} />

---

import morphologyText from "./assets/morphology-text.png";

## Morphology

We can use it for: old-school OCR

<p style={{textAlign: "center"}}>
  <img src={morphologyText} style={{height: "60vh"}} />
  <Legend>Fusing things together might be just what we need</Legend>
</p>

---

import ConvolutionsImg from "./assets/convolution.gif";

## Convolutions

<img src={ConvolutionsImg} style={{height: "70vh"}} />

---

import caffeNet from "./assets/caffenet_learned_filters.png";

## Deep-learned Convolutions

<p style={{textAlign: "center"}}>
  <img src={caffeNet} style={{height: "60vh"}} />
  <Legend>1st layer of the CaffeNet model</Legend>
</p>

The highly-parallelizable computation makes sense for both GPUs and our brains.

---

import Convolution from "./slides/Convolution";

## Convolutions

<Convolution baseWidth={384} baseHeight={384} />

---

# Feature Extraction

<Steps>
  <P>"Are these pixels showing a church?"</P>
  <P>"Is something square with a pointy end, a church?"</P>
</Steps>

---

import descriptor from "./assets/descriptor.jpg";

## Feature descriptors

<img style={{height: "60vh"}} src={descriptor} />

You want **scale**

---

import segmentation1 from "./assets/segmentation1.png";
import segmentation2 from "./assets/segmentation2.png";

## Connected Components

<img style={{height: "60vh"}} src={segmentation1} />
<img style={{height: "60vh"}} src={segmentation2} />

---

import corner from "./assets/corner.png";

## Corner detection

<img style={{height: "70vh"}} src={corner} />

---

# Thank you!

[http://paolobueno.com/im-presentation/](http://paolobueno.com/im-presentation/)

---

## More Image Processing

- [Image and video processing @ Coursera](https://www.coursera.org/learn/image-processing)
- [OpenCV](https://opencv.org/)
- [MDN Canvas API](https://developer.mozilla.org/en-US/docs/Web/API/Canvas_API)
- [SVG Filters Playground](https://yoksel.github.io/svg-filters/)
- [JuliaImages](https://juliaimages.org/latest/)
- [GNU Octave - MATLAB as in beer](https://www.gnu.org/software/octave/)

---

## More AI & ML

- [Google ML crash courses](https://developers.google.com/machine-learning/)
- [Andrew Ng's ML course](https://www.coursera.org/learn/machine-learning)
- [making of Not Hotdog](https://medium.com/@timanglade/how-hbos-silicon-valley-built-not-hotdog-with-mobile-tensorflow-keras-react-native-ef03260747f3)
- [Kaggle](https://www.kaggle.com/)
- [Tensorflow JS](https://www.tensorflow.org/)
- [Webgazer JS](https://webgazer.cs.brown.edu/)

---

Segmentation example ©
[Cyrille Rossant @ IPython Cookbook](https://ipython-books.github.io/113-segmenting-an-image/)

Convolution animation ©
[Paul-Louis Prove](https://towardsdatascience.com/types-of-convolutions-in-deep-learning-717013397f4d)

Mercado De La Boqueria, Barcelona, Spain
[on unsplash](https://unsplash.com/photos/-gOUx23DNks)

Template matching example ©
[scikit-image team](http://scikit-image.org/docs/dev/auto_examples/features_detection/plot_template.html)

This presentation © Paolo Bueno, CC BY 4.0
